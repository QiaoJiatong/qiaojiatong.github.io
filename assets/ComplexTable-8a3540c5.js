import{_ as le,e as f,g as V,u as ae,x as U,r as s,o as h,h as $,a,w as n,l as m,b as S,t as C,c as Y,y as oe,F as ne,k as re,z as ue}from"./index-3268ad1a.js";const se={class:"complex-table"},de=["onClick"],ie={class:"dialog-footer"},_="140px",me={__name:"ComplexTable",setup(pe){const w=f(""),L=V(()=>u.value.filter(l=>!w.value||l.title.toLowerCase().includes(w.value.toLowerCase()))),g=f(),D=f(!1),y=f(!1),v=f(0),H=f(["#99A9BF","#F7BA2A","#FF9900"]),A=f(""),F=f(""),o=ae({title:"",name:"",date:"",imp:null,remark:""}),I=()=>{g.value.clearFilter(["date"])},R=()=>{g.value.clearFilter()},M=l=>l.title,x=(l,t,r)=>{const d=r.property;return t[d]===l},T=(l,t)=>{l===null?(A.value="addPop",F.value="Add"):(A.value="editPop",F.value="edit"),o.date=t.date,o.imp=t.imp,o.type=t.type,o.title=t.title,o.name=t.name,o.remark=t.remark,v.value=l,y.value=!0},E=()=>{A.value==="addPop"?u.value.push(o):(u.value[v.value].title=o.title,u.value[v.value].name=o.name,u.value[v.value].date=o.date,u.value[v.value].type=o.type,u.value[v.value].imp=o.imp,u.value[v.value].remark=o.remark),y.value=!1},P=(l,t)=>{u.value=u.value.filter(r=>r!==t),console.log(l)},u=f([{date:"2016-05-03",name:"Joe",title:"No. 189, Los Angeles",type:"China",status:"draft",imp:"3",remark:"",reviewer:"Jack"},{date:"2016-05-01",name:"Tom",title:"No. 189, Grove, Los Angeles",type:"USA",status:"published",imp:"4",remark:"",reviewer:"Larry"},{date:"2016-05-04",name:"marry",title:"No. 189, Grove St, ",type:"EuroZone",status:"draft",imp:"1",remark:"",reviewer:"Mary"},{date:"2016-05-01",name:"Tom",title:"No. 189, Grove St,Angeles",type:"Japan",status:"published",imp:"2",remark:"",reviewer:"Frank"}]),q=V(()=>B(u.value.map(l=>({text:l.name,value:l.name})),l=>l.text)),z=V(()=>U.uniqBy(u.value,"date").map(l=>({text:l.date,value:l.date}))),G=V(()=>U.uniqBy(u.value,"imp").map(l=>({text:l.imp,value:l.imp}))),J=U.uniqBy(u.value,"type").map(l=>l.type),O=V(()=>B(u.value.map(l=>({text:l.status,value:l.status})),"text")),W=l=>{l.status==="published"?l.status="draft":l.status="published"},B=(l,t)=>{let r=p=>p;typeof t=="string"?r=p=>p[t]:typeof t=="function"&&(r=t);const d=[];for(let p=0;p<l.length;p++){let i=!1;for(let b=0;b<d.length;b++)if(r(l[p])===r(d[b])){i=!0;break}i||d.push(l[p])}return d};return(l,t)=>{const r=s("el-button"),d=s("el-input"),p=s("el-checkbox"),i=s("el-table-column"),b=s("el-tag"),N=s("el-rate"),Z=s("el-status"),K=s("el-table"),Q=s("el-option"),X=s("el-select"),c=s("el-form-item"),j=s("el-date-picker"),ee=s("el-form"),te=s("el-dialog");return h(),$("div",se,[a(r,{onClick:I},{default:n(()=>[m("reset date filter")]),_:1}),a(r,{onClick:R},{default:n(()=>[m("reset all filters")]),_:1}),a(d,{modelValue:w.value,"onUpdate:modelValue":t[0]||(t[0]=e=>w.value=e),size:"small",placeholder:"Type to search",style:{width:"300px"}},null,8,["modelValue"]),a(r,{text:"",type:"primary",onClick:t[1]||(t[1]=e=>T(null,o))},{default:n(()=>[m(" Add ")]),_:1}),a(p,{modelValue:D.value,"onUpdate:modelValue":t[2]||(t[2]=e=>D.value=e),style:{padding:"10px"}},{default:n(()=>[m("reviewer")]),_:1},8,["modelValue"]),a(K,{ref_key:"tableRef",ref:g,"row-key":"date",data:L.value,style:{width:"100%"}},{default:n(()=>[a(i,{type:"index",label:"ID",width:"80",sortable:""}),a(i,{prop:"date",label:"Date",width:"120",filters:z.value,"filter-method":x},null,8,["filters"]),a(i,{prop:"title",label:"Title",formatter:M},{default:n(e=>[S("div",{onClick:k=>T(e.$index,e.row)},C(e.row.title),9,de),a(b,null,{default:n(()=>[m(C(e.row.type),1)]),_:2},1024)]),_:1}),a(i,{prop:"name",label:"Author",width:"100",filters:q.value,"filter-method":x},null,8,["filters"]),D.value?(h(),Y(i,{key:0,prop:"reviewer",label:"Reviewer",width:"180"})):oe("",!0),a(i,{prop:"imp",label:"Imp",width:"180",filters:G.value,"filter-method":x},{default:n(e=>[a(N,{modelValue:e.row.imp,"onUpdate:modelValue":k=>e.row.imp=k,colors:H.value,style:{"pointer-events":"none"}},null,8,["modelValue","onUpdate:modelValue","colors"])]),_:1},8,["filters"]),a(i,{prop:"status",label:"Status",width:"100","column-key":"status",filters:O.value,"filter-method":x,"filter-placement":"bottom-end"},{default:n(e=>[a(Z,{type:e.row.status==="published"?"":"success","disable-transitions":""},{default:n(()=>[m(C(e.row.status),1)]),_:2},1032,["type"])]),_:1},8,["filters"]),a(i,{label:"Operations"},{default:n(e=>[a(r,{text:"",type:"primary",onClick:k=>T(e.$index,e.row)},{default:n(()=>[m(" Edit ")]),_:2},1032,["onClick"]),a(r,{text:"",type:"primary",onClick:k=>W(e.row),style:{width:"60px"}},{default:n(()=>[m(C(e.row.status==="draft"?"published":"draft"),1)]),_:2},1032,["onClick"]),a(r,{size:"small",type:"danger",onClick:k=>P(e.$index,e.row)},{default:n(()=>[m("Delete")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(te,{modelValue:y.value,"onUpdate:modelValue":t[10]||(t[10]=e=>y.value=e),title:F.value},{footer:n(()=>[S("span",ie,[a(r,{onClick:t[9]||(t[9]=e=>y.value=!1)},{default:n(()=>[m("Cancel")]),_:1}),a(r,{type:"primary",onClick:E},{default:n(()=>[m(" Confirm ")]),_:1})])]),default:n(()=>[a(ee,{model:o},{default:n(()=>[a(c,{label:"type: ","label-width":_},{default:n(()=>[a(X,{modelValue:o.type,"onUpdate:modelValue":t[3]||(t[3]=e=>o.type=e),placeholder:"Please select type"},{default:n(()=>[(h(!0),$(ne,null,re(ue(J),e=>(h(),Y(Q,{key:e,value:e},null,8,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(c,{label:"Date:","label-width":_},{default:n(()=>[a(j,{modelValue:o.date,"onUpdate:modelValue":t[4]||(t[4]=e=>o.date=e),type:"datetime",placeholder:"Select date and time",shortcuts:l.shortcuts,format:"YYYY/MM/DD HH:mm","value-format":"YYYY-MM-DD HH:mm"},null,8,["modelValue","shortcuts"])]),_:1}),a(c,{label:"Title: ","label-width":_},{default:n(()=>[a(d,{modelValue:o.title,"onUpdate:modelValue":t[5]||(t[5]=e=>o.title=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(c,{label:"Author: ","label-width":_},{default:n(()=>[a(d,{modelValue:o.name,"onUpdate:modelValue":t[6]||(t[6]=e=>o.name=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(c,{label:"Imp: ","label-width":_},{default:n(()=>[a(N,{modelValue:o.imp,"onUpdate:modelValue":t[7]||(t[7]=e=>o.imp=e)},null,8,["modelValue"])]),_:1}),a(c,{label:"Remark: ","label-width":_},{default:n(()=>[a(d,{modelValue:o.remark,"onUpdate:modelValue":t[8]||(t[8]=e=>o.remark=e),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},ve=le(me,[["__scopeId","data-v-d54f2e5f"]]);export{ve as default};
